function swapCards(e){function t(){r.classList.remove("current--card"),n.classList.remove("previous--card"),a.classList.remove("next--card"),o.classList.remove("current--image"),s.classList.remove("previous--image"),i.classList.remove("next--image"),r.style.zIndex="50",o.style.zIndex="-2","right"===e?(n.style.zIndex="20",a.style.zIndex="30",i.style.zIndex="-1",r.classList.add("previous--card"),n.classList.add("next--card"),a.classList.add("current--card"),o.classList.add("previous--image"),s.classList.add("next--image"),i.classList.add("current--image")):"left"===e&&(n.style.zIndex="30",a.style.zIndex="20",s.style.zIndex="-1",r.classList.add("next--card"),n.classList.add("current--card"),a.classList.add("previous--card"),o.classList.add("next--image"),s.classList.add("current--image"),i.classList.add("previous--image"))}const r=cardsContainerEl.querySelector(".current--card"),n=cardsContainerEl.querySelector(".previous--card"),a=cardsContainerEl.querySelector(".next--card"),o=appBgContainerEl.querySelector(".current--image"),s=appBgContainerEl.querySelector(".previous--image"),i=appBgContainerEl.querySelector(".next--image");changeInfo(e),t(),removeCardEvents(r)}function changeInfo(e){function t(){r.classList.remove("current--info"),n.classList.remove("previous--info"),a.classList.remove("next--info"),"right"===e?(r.classList.add("previous--info"),a.classList.add("current--info"),n.classList.add("next--info")):"left"===e&&(r.classList.add("next--info"),a.classList.add("previous--info"),n.classList.add("current--info"))}let r=cardInfosContainerEl.querySelector(".current--info"),n=cardInfosContainerEl.querySelector(".previous--info"),a=cardInfosContainerEl.querySelector(".next--info");gsap.timeline().to([buttons.prev,buttons.next],{duration:.2,opacity:.5,pointerEvents:"none"}).to(r.querySelectorAll(".text"),{duration:.4,stagger:.1,translateY:"-120px",opacity:0},"-=").call(()=>{t(e)}).call(()=>initCardEvents()).fromTo("right"===e?a.querySelectorAll(".text"):n.querySelectorAll(".text"),{opacity:0,translateY:"40px"},{duration:.4,stagger:.1,translateY:"0px",opacity:1}).to([buttons.prev,buttons.next],{duration:.2,opacity:1,pointerEvents:"all"})}function updateCard(e){const t=e.currentTarget,r=t.getBoundingClientRect(),n={x:r.left+r.width/2,y:r.top+r.height/2};let a=Math.atan2(e.pageX-n.x,0)*(35/Math.PI);gsap.set(t,{"--current-card-rotation-offset":`${a}deg`});const o=cardInfosContainerEl.querySelector(".current--info");gsap.set(o,{rotateY:`${a}deg`})}function resetCardTransforms(e){const t=e.currentTarget,r=cardInfosContainerEl.querySelector(".current--info");gsap.set(t,{"--current-card-rotation-offset":0}),gsap.set(r,{rotateY:0})}function initCardEvents(){const e=cardsContainerEl.querySelector(".current--card");e.addEventListener("pointermove",updateCard),e.addEventListener("pointerout",e=>{resetCardTransforms(e)})}function removeCardEvents(e){e.removeEventListener("pointermove",updateCard)}function init(){let e=gsap.timeline();e.to(cardsContainerEl.children,{delay:.15,duration:.5,stagger:{ease:"power4.inOut",from:"right",amount:.1},"--card-translateY-offset":"0%"}).to(cardInfosContainerEl.querySelector(".current--info").querySelectorAll(".text"),{delay:.5,duration:.4,stagger:.1,opacity:1,translateY:0}).to([buttons.prev,buttons.next],{duration:.4,opacity:1,pointerEvents:"all"},"-=0.4")}let showBtn=document.querySelector("#show_btn"),contactsSmall=document.querySelector("#contacts_list");showBtn.onclick=function(){contactsSmall.classList.toggle("show"),this.children[0].classList.toggle("rotate")},$("body").niceScroll({cursorcolor:"#D43636",cursorwidth:"15px",background:"#CCC"});const{gsap:gsap,imagesLoaded:imagesLoaded}=window,buttons={prev:document.querySelector(".btn--left"),next:document.querySelector(".btn--right")},cardsContainerEl=document.querySelector(".cards__wrapper"),appBgContainerEl=document.querySelector(".app__bg"),cardInfosContainerEl=document.querySelector(".info__wrapper");buttons.next.addEventListener("click",()=>swapCards("right")),buttons.prev.addEventListener("click",()=>swapCards("left")),initCardEvents();const waitForImages=()=>{const e=[...document.querySelectorAll("img")],t=e.length;let r=0;const n=document.querySelector(".loader span");gsap.set(cardsContainerEl.children,{"--card-translateY-offset":"100vh"}),gsap.set(cardInfosContainerEl.querySelector(".current--info").querySelectorAll(".text"),{translateY:"40px",opacity:0}),gsap.set([buttons.prev,buttons.next],{pointerEvents:"none",opacity:"0"}),e.forEach(e=>{imagesLoaded(e,e=>{if(e.isComplete){r++;let e=r/t;gsap.to(n,{duration:1,scaleX:e,backgroundColor:`hsl(${120*e}, 100%, 50%`}),t==r&&gsap.timeline().to(".loading__wrapper",{duration:.8,opacity:0,pointerEvents:"none"}).call(()=>init())}})})};waitForImages();